{% extends "base.html" %}

{% block title %}Menu Management - Caf√© Management System{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2><i class="fas fa-utensils"></i> Menu Management</h2>
    <a href="{{ url_for('add_menu_item') }}" class="btn btn-success">
        <i class="fas fa-plus"></i> Add New Item
    </a>
</div>

<!-- Category Filter -->
<div class="mb-4">
    <div class="btn-group" role="group">
        <button type="button" class="btn btn-outline-primary active" onclick="filterCategory('all')">All</button>
        {% for category in categories %}
            <button type="button" class="btn btn-outline-primary" onclick="filterCategory('{{ category }}')">{{ category }}</button>
        {% endfor %}
    </div>
</div>

<!-- Menu Items -->
<div class="row" id="menu-items">
    {% for item in menu_items %}
    <div class="col-md-6 col-lg-4 mb-4 menu-item" data-category="{{ item.category }}">
        <div class="card h-100">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-start mb-2">
                    <h5 class="card-title">{{ item.name }}</h5>
                    <span class="badge bg-{{ 'success' if item.available else 'secondary' }}">
                        {{ 'Available' if item.available else 'Unavailable' }}
                    </span>
                </div>
                <p class="card-text text-muted small">{{ item.description }}</p>
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <strong class="text-success">${{ "%.2f"|format(item.price) }}</strong>
                        <br>
                        <small class="text-muted">{{ item.category }}</small>
                    </div>
                    <div class="btn-group">
                        <a href="{{ url_for('edit_menu_item', id=item.id) }}" class="btn btn-sm btn-outline-primary">
                            <i class="fas fa-edit"></i>
                        </a>
                        <a href="{{ url_for('delete_menu_item', id=item.id) }}" 
                           class="btn btn-sm btn-outline-danger"
                           onclick="return confirm('Are you sure you want to delete this item?')">
                            <i class="fas fa-trash"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

{% if not menu_items %}
<div class="text-center py-5">
    <i class="fas fa-utensils fa-3x text-muted mb-3"></i>
    <h4 class="text-muted">No menu items found</h4>
    <p class="text-muted">Start by adding your first menu item</p>
    <a href="{{ url_for('add_menu_item') }}" class="btn btn-success">
        <i class="fas fa-plus"></i> Add Menu Item
    </a>
</div>
{% endif %}
{% endblock %}

{% block scripts %}
<script>
function filterCategory(category) {
    const items = document.querySelectorAll('.menu-item');
    const buttons = document.querySelectorAll('.btn-group .btn');
    
    // Update active button
    buttons.forEach(btn => btn.classList.remove('active'));
    event.target.classList.add('active');
    
    // Filter items
    items.forEach(item => {
        if (category === 'all' || item.dataset.category === category) {
            item.style.display = 'block';
        } else {
            item.style.display = 'none';
        }
    });
}
</script>
{% endblock %}